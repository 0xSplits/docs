import { Toggle } from '../../components/toggle'
import { Tab, Tabs } from 'nextra-theme-docs'

# Swapper

![Split diagram](./img/swapper_diagram.png)

Swapper is a payable smart contract that converts all incoming tokens into a
single output token. Whenever ETH and ERC20s are received by a Swapper, they're
automatically swapped into the output token according to the oracle's clearing
price.

- [Github](https://github.com/0xSplits/splits-swapper)
- [Contracts & Natspec](https://github.com/0xSplits/splits-swapper/tree/main/src)
- Related: [Oracle](/core/oracle), [Diversifier](/templates/diversifier)

## How it works

- Each Swapper is a payable smart contract with a specified beneficiary, output
  token (ETH or any ERC20), oracle, and optional owner. The oracle is modular so
  be careful to **use a secure oracle** with sensible defaults & overrides for
  desired behavior. You can use whatever oracle contract you'd like. Splits
  currently offers one [oracle](/core/oracle), which uses Uniswap v3 TWAP to
  price assets.
- Tokens received by Swapper are held in the contract's balance until `flash` is
  called. When `flash` is called, the caller sends the expected amount (as
  determined by the oracle) to the beneficiary in exchange for the balance in
  Swapper. This means _the caller is trading with Swapper directly_, earning the
  balance in exchange for sending the expected value to the beneficiary.
- Each Swapper can be owned, which means the **owner has full control of the
  deployment**. The owner may change the oracle, pause the contract, and execute
  arbitrary transactions at their will. We recommend removing the owner or
  making it a multisig if Swapper is being used in any trustless setting.

[![Sequence diagram of successful example call to Swapper#flash](https://mermaid.ink/svg/pako:eNqNlMtu2zAQRX-FYGGoRW3UiB3b0CKApVpAFkGQJuim6mIsjRIiFKmSo7RG4H8vKcGxZalBN3pwztyZy9crz3SOPOSj0WuqGBNKUMiaT8YCesISg5AFW7AYjE9Hv4MRsJVogze8CRZaUQKlkDuf5yF5SGyT8Q_FWmrjwx8W0fJiNe0AlRElmN2RSWbJPFkMMZE2OZp31SxmWuUdvcVms4yWw9S54nS-XF12WchIvAAJrf4DJjQkOtXXl9E8iQehc735bLaK10FL7v3LPfajUapSZfFXjSrDrwIeDZSeaLkHA05kcnX1-f43VBWaa0XoENImbFY3kWCfWrZHnKSFrOiBPnxrIJMYskeku1oTrktdK7It1wYdNnlTgdP4QccRA939YGRA2QIN8_uNkX5G9dF-Yj97XQxk23aosReDlFvInv9l81jfV918iy-mzP0a_YLsC6tg55PPynZm6eivZyxChYXI_IJ2LDVuHvRJuO9rMuCLNIHs5L3TVrv6IeNjXqIpQeTuaDfHM-XNsU25a5n76U2520yOg5r0_U5lPCRT45jXVQ502Fc8LEBaN4q5cCVu2ruiuTL2fwHX4Vpz?type=png)](https://mermaid.live/edit#pako:eNqNlMtu2zAQRX-FYGGoRW3UiB3b0CKApVpAFkGQJuim6mIsjRIiFKmSo7RG4H8vKcGxZalBN3pwztyZy9crz3SOPOSj0WuqGBNKUMiaT8YCesISg5AFW7AYjE9Hv4MRsJVogze8CRZaUQKlkDuf5yF5SGyT8Q_FWmrjwx8W0fJiNe0AlRElmN2RSWbJPFkMMZE2OZp31SxmWuUdvcVms4yWw9S54nS-XF12WchIvAAJrf4DJjQkOtXXl9E8iQehc735bLaK10FL7v3LPfajUapSZfFXjSrDrwIeDZSeaLkHA05kcnX1-f43VBWaa0XoENImbFY3kWCfWrZHnKSFrOiBPnxrIJMYskeku1oTrktdK7It1wYdNnlTgdP4QccRA939YGRA2QIN8_uNkX5G9dF-Yj97XQxk23aosReDlFvInv9l81jfV918iy-mzP0a_YLsC6tg55PPynZm6eivZyxChYXI_IJ2LDVuHvRJuO9rMuCLNIHs5L3TVrv6IeNjXqIpQeTuaDfHM-XNsU25a5n76U2520yOg5r0_U5lPCRT45jXVQ502Fc8LEBaN4q5cCVu2ruiuTL2fwHX4Vpz)

## Addresses

<Tabs items={['Mainnets', 'Testnets']}>

<Tab>

Coming soon

</Tab>

<Tab>

Coming soon

</Tab>

</Tabs>
